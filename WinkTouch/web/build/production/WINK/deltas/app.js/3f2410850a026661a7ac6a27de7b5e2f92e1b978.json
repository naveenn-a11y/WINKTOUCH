["function _92f52cadce8bee5bfed6ee4a7d111d57379f2a89",50,603,"amera){Ext.device.camera",633,510867,"camera.Abstract\",Ext.Base,{source:{library:0,camera:1,album:2},destination:{data:0,file:1,\"native\":2},encoding:{jpeg:0,jpg:0,png:1},media:{picture:0,video:1,all:2},direction:{back:0,front:1},capture:Ext.emptyFn,getPicture:Ext.emptyFn,cleanup:Ext.emptyFn},0,0,0,0,0,0,[Ext.device.camera",157310,38,"device.camera.Cordova\",Ext.device.camera",205648,35,"device.camera.PhoneGap\",getPicture:function(d,b,a){try{navigator.camera.getPicture(d,b,a)}catch(c){alert(c)}},cleanup:function(c,a){try{navigator.camera.cleanup(c,a)}catch(b){alert(b)}},capture:function(h){var f=h.success,d=h.failure,j=h.scope,b=this.source,e=this.destination,g=this.encoding,a=h.source,i=h.destination,c=h.encoding,k={};if(j){f=Ext.Function.bind(f,j);d=Ext.Function.bind(d,j)}if(a!==undefined){k.sourceType=b.hasOwnProperty(a)?b[a]:a}if(i!==undefined){k.destinationType=e.hasOwnProperty(i)?e[i]:i}if(c!==undefined){k.encodingType=g.hasOwnProperty(c)?g[c]:c}if(\"quality\" in h){k.quality=h.quality}if(\"width\" in h){k.targetWidth=h.width}if(\"height\" in h){k.targetHeight=h.height}this.getPicture(f,d,k)}},0,0,0,0,0,0,[Ext.device.camera,\"Cordova\",Ext.device.camera",512782,45,"camera.Sencha\",Ext.device.camera.Abstract,{capture:function(d){var c=this.source,b=this.destination,f=this.encoding,g=d.source,a=d.destination,e=d.encoding;if(c.hasOwnProperty(g)){g=c[g]}if(b.hasOwnProperty(a)){a=b[a]}if(f.hasOwnProperty(e)){e=f[e]}",513067,39,"Camera#capture\",callbacks:{success:d.success,failure:d.failure},scope:d.scope,quality:d.quality,width:d.width,height:d.height,source:g,destination:a,encoding:e})}},0,0,0,0,0,0,[Ext.device.camera,\"Sencha",511774,35,"camera.Simulator\",Ext.device.camera.Abstract,{config:{samples:[{success:\"http://www.sencha.com/img/sencha-large.png\"}]",338752,46,"updateSamples:function(a){this.sampleIndex=0},capture:function(d){var c=this.sampleIndex,b=this.getSamples(),g=b.length,f=b[c],e=d.scope,h=d.success,a=d.failure;if(\"success\" in f){if(h){h.call(e,f.success)}}else{if(a){a.call(e,f.failure)}}if(++c>g-1){c=0}this.sampleIndex=c}},1,0,0,0,0,0,[Ext.device.camera",513549,46,"Camera",511264,50,513651,79,"camera",513736,59,"camera",513801,42,"camera",513849,40,"Camera",511774,42,511507,138790,650105,32,"RxWorksheet){a.set(\"createdon\",new Date());a.set(\"scriptreceivedon\",null);a.set(\"createby",650250,49,650298,2306,"c.responseText=c.responseText.trim(",652602,125,".trim(),\"accountid\");if(",653210,51,"WINK.Utilities.accountid.trim()}",652741,464,";if(",653210,51,"WINK.Utilities.accountid.trim()}",653205,156,652406,33,653362,9607,",{model:\"WINK.model.RxWorksheet\",name:\"rxworksheets_frame_idproduct\",foreignKey:\"frame_idproduct\",associationKey:\"rxworksheets_frame",662495,48,"RxWorksheet\",name:\"rxworksheets_lens_idproduct\",foreignKey:\"lens_idproduct\",associationKey:\"rxworksheets_lens",662495,48,"RxWorksheet\",name:\"rxworksheet",662815,88,"rxworksheets_",707840,44,"},{model:\"WINK.model.RxWorksheet\",name:\"rxworksheet",662589,92,"rxworksheet",662589,33,673199,36,"RxWorksheetTreatment\",name:\"rxworksheettreatment",662399,68,"rxworksheettreatment",662142,57,"ClWorksheet\",name:\"clworksheets_rcl_idproduct\",foreignKey:\"rcl_idproduct\",associationKey:\"clworksheets_rcl",662495,48,"ClWorksheet\",name:\"clworksheets_lcl_idproduct\",foreignKey:\"lcl_idproduct\",associationKey:\"clworksheets_lcl_idproduct",674943,65,"3",664144,32,719744,50,663099,4271,",{model:\"WINK.model.RxWorksheet\",name:\"rxworksheets_framebarcode_idbarcode\",foreignKey:\"frame",667280,35,"rxworksheets_frame",693806,34,"},{model:\"WINK.model.ClWorksheet\",name:\"clworksheets_rbarcode_idbarcode\",foreignKey:\"r",667280,35,"clworksheets_r",693806,34,"},{model:\"WINK.model.ClWorksheet\",name:\"clworksheets_lbarcode_idbarcode\",foreignKey:\"l",667280,35,"clworksheets_l",693806,34,"}",720976,44,"Barc",720190,38,667456,11616,"989795240",679081,5717,"7,5,9,55)",669338,65,687199,52,684926,1088,"7,5,9,55",686024,4001,690254,209,",",667184,65,654879,33,690333,61,763866,51,682464,38,690254,209,",{model:\"WINK.model.RxWorksheet\",name:\"rxworkshee",765343,34,690331,63,"rxworkshee",765343,34,682464,38,"ClWorksheet\",name:\"clworkshee",765343,34,690331,63,"clworkshee",765343,34,674943,56,690501,3247,"RxWorksheet\",associatedName:\"fkrxworksheet_idrxworksheet\",foreignKey:\"rxworksheet_idrxworkshee",729615,36,"rxworksheet_idrxworksheet\",setterName:\"setFkrxworksheet_idrxworksheet\"},{model:\"WINK.model.ClWorksheet\",associatedName:\"fkclworksheet_idclworksheet\",foreignKey:\"clworksheet_idclworksheet",675520,36,"lworksheet_idclworksheet\",setterName:\"setFkclworksheet_idclworkshee",693725,2775,"7,5,9,55",696510,1990,"7,5,9,55",698510,11783,"7",710294,6985,",{model:\"WINK.model.RxWorksheet\",name:\"rxworksheets_",716752,33,716800,37,"rxworksheets_",716446,57,"ClWorksheet\",name:\"clworksheets_",716752,33,716800,37,"clworksheets_",716446,37,673456,79,717358,2307,",{model:\"WINK.model.RxWorksheet\",name:\"rxworksheets_frame_idtaxcode\",foreignKey:\"frame_idtaxcode\",associationKey:\"rxworksheets_fram",719636,1700,"type:\"string",721334,1391,690254,46,701101,50,722634,237,",{model:\"WINK.model.RxWorksheet\",name:\"rxworksheet",722399,68,"rxworksheets_",721744,35,673456,37,722908,4919,",{model:\"WINK.model.RxWorksheet\",name:\"rxworksheet",726302,64,"rxworksheet",726380,55,"RxWorksheet\",name:\"rxworksheets_doctor_iduser\",foreignKey:\"doctor_iduser\",associationKey:\"rxworksheets_",726058,51,"RxWorksheet\",name:\"rxworksheets_opticianuser_iduser\",foreignKey:\"opticianuser_iduser\",associationKey:\"rxworksheets_opticianuse",726063,46,"ClWorksheet\",name:\"clworksheet",726302,64,"clworksheet",726380,55,"ClWorksheet\",name:\"clworksheets_doctor_iduser\",foreignKey:\"doctor_iduser\",associationKey:\"clworksheets_",726058,51,"ClWorksheet\",name:\"clworksheets_opticianuser_iduser\",foreignKey:\"opticianuser_iduser\",associationKey:\"clworksheets_optician",727798,1984,"model.RxWorkshee",675776,79,"rxworkshee",675872,188,685032,54,"externaldoct",660335,42,"docto",665887,47,"tra",680960,33,",{name:\"r",438618,34,"},{name:\"l",438618,34,"},{name:\"r_sph\",type:\"string\",defaultValue:\"0.00\"},{name:\"r_cyl",692720,39,"_axis",692720,39,"_add",692720,39,"_prism1",692720,39,"_prism1b",660160,36,"r_prism",686335,39,"r_prism2b",660160,36,"prism",718640,44,"r_farpd",692720,39,"_closepd",692720,39,"_heigh",692608,39,"r_",692715,43,"labinstructions",677168,41,"_sph\",type:\"string\",defaultValue:\"0.00\"},{name:\"l_cyl",686336,38,"l_axis",686336,38,"l_add",686336,38,"l_prism1",686336,38,"l_prism1b",660160,36,"l_prism",686335,39,"l_prism2b",660160,36,"l_farpd",686336,38,"l_closepd",686336,38,"l_heigh",692608,39,"l_",692715,43,"underwarrant",667680,45,"framesrc",660160,37,"rame",657420,45,657031,105,"b",708672,41,"ramee",657424,41,"framedb",657040,46,657136,46,657872,41,"ramesha",656943,43,692715,44,"_bc",686336,38,"l_bc",686336,38,"frame",691728,49,"frame",667725,43,"null",696511,44,",{name:\"fram",706400,50,"isexternaldocto",660688,45,"lens",691728,49,706857,66,706736,68,658319,100,"rpricemanuallyupdat",710048,46,"lpricemanuallyupdat",710048,46,"framepricemanuallyupdat",710048,46,659551,58,724911,56,"upload",673936,36,654749,59,"null},{name:\"reasonforredo",656894,47,"rxredoreason_idrxredoreason",724928,40,"xreasonforpurchase_idrxreasonforpurchas",698287,40,"ispatientown",709807,50,"r_price_material",692720,39,"_price_coating",686336,38,"l_price_material",686336,38,"l_price_coating",692720,39,"pricecoatingmanuallyupdat",710048,47,"pricematerialmanuallyupdat",710048,46,"lpricecoatingmanuallyupdat",710048,46,"lpricematerialmanuallyupdat",710048,46,685962,52,"7,5,9,55)},{name:\"scriptreceiv",685967,47,"7,5,9,55)},{name:\"optician",665884,51,"_v",657136,41,"l_v",657136,41,"r_add",686335,39,"l_add",686335,39,"r_thickness",692720,39,"_ec",660160,36,"l_thickness",686336,38,"l_ec",660160,36,"r_vertex",692720,39,"_vertexadju",659328,40,"l_vertex",686336,38,"l_vertextadju",659328,40,"per",710379,51,670576,32,676330,249,687917,197,"doctor_iduser\",foreignKey:\"docto",689263,49,689316,32,"_iduser",729519,49,"frame_idproduct\",foreignKey:\"frame",693628,45,"frame_idproduct\",setterName:\"setFkframe",693716,59,"framebarcode_idbarcode\",foreignKey:\"frame",693806,52,"frame",693858,36,"frame",693894,39,"TaxCode\",associatedName:\"fkframe_idtaxcode\",foreignKey:\"fram",720864,46,"frame_idtaxcode\",setterName:\"setFkfram",693530,60,"lens_idproduct\",foreignKey:\"lens",693628,45,"lens_idproduct\",setterName:\"setFklens_idproduct",729519,49,707799,178,707519,253,"Supplier\",associatedName:\"fk",716752,33,716446,36,",getterName:\"getFk",661468,38,701472,41,688236,184,"RxWorksheet\",associatedName:\"fkrxworksheet_idrxworksheet\",foreignKey:\"rxworksheet_idrxworkshee",729615,36,"rxworksheet_idrxworksheet\",setterName:\"setFkrxworksheet_idrxworkshee",696749,47,"opticianuser_iduser\",foreignKey:\"optician",689260,46,"opticianuser_iduser\",setterName:\"setFkoptician",667160,89,"rxworksheet_idrxworksheet\",foreignKey:\"rxworksheet_idrxworksheet",727263,38,"rxworksheet_idrxworkshee",662160,39,"RxWorksheet\",name:\"rxworksheets_rxworksheet_idrxworksheet\",foreignKey:\"rxworksheet_idrxworksheet\",associationKey:\"rxworksheets_rxworksheet_idrxworkshee",662160,39,"RxWorksheetTreatment\",name:\"rxworksheettreatments_rxworksheet_idrxworksheet\",foreignKey:\"rxworksheet_idrxworksheet\",associationKey:\"rxworksheettreatments_rxworksheet_idrxworksheet",674943,55,"externaldocto",684208,39,"tray",663552,39,"_sph",663296,38,"l_sph",663296,43,663436,43,"framemodel",663296,43,"colo",684208,39,663290,135,663246,44,703951,96,690648,49,"reasonforredocomment",664446,39,"r_va",663296,38,"l_va",655856,44,"RxWorksheet",721040,35,"ClWorkshee",675776,79,"clworkshee",675872,188,685032,54,"externaldoct",660335,42,"docto",665887,47,"tra",680960,33,",{name:\"labinstructions",698736,41,"_qty",659088,36,"l_qty",659088,36,"r_sph\",type:\"string\",defaultValue:\"0.00\"},{name:\"r_cyl",692720,39,"_axis",692720,39,"_add",692720,39,"_bc",692720,39,"_dia",692720,39,"_d",658096,37,"r_",692715,43,"l_sph\",type:\"string\",defaultValue:\"0.00\"},{name:\"l_cyl",686336,38,"l_axis",686336,38,"l_add",686336,38,"l_bc",686336,38,"l_dia",686336,38,"l_d",658096,37,"l_",692715,43,670239,43,"rcl",691728,50,667725,43,"null},{name:\"l",667725,43,"null},{name:\"isexternaldocto",660688,45,"lcl",691728,50,658320,99,"rpricemanuallyupdat",710048,46,"lpricemanuallyupdat",710048,46,659551,58,685962,52,"7,5,9,55)},{name:\"optician",665884,42,670576,32,676330,249,687917,197,"doctor_iduser\",foreignKey:\"docto",689263,49,689316,32,"_iduser",729519,49,"rcl_idproduct\",foreignKey:\"rcl",693628,45,"rcl_idproduct\",setterName:\"setFkrcl",693716,59,"rbarcode_idbarcode\",foreignKey:\"r",693806,52,"r",693858,36,"r",693894,39,"Barcode\",associatedName:\"fklbarcode_idbarcode\",foreignKey:\"l",693806,52,"l",693858,36,"l",693894,39,"Product\",associatedName:\"fklcl_idproduct\",foreignKey:\"lcl",693628,45,"lcl_idproduct\",setterName:\"setFklcl_idproduct",661534,50,716752,33,716446,36,",getterName:\"getFk",661468,38,701472,41,"User\",associatedName:\"fkopticianuser_iduser\",foreignKey:\"optician",689260,46,"opticianuser_iduser\",setterName:\"setFkoptician",667160,89,"clworksheet_idclworksheet\",foreignKey:\"clworksheet_idclworksheet",727263,38,"clworksheet_idclworksheet",674943,55,"externaldocto",684208,39,"tray",663552,39,"_sph",663296,38,"l_sph",663552,111,"]}},0,0,0,0,0,0,[WINK.model,\"ClWorksheet",730880,36,729789,4168,"false",735919,51,734012,4767,738843,24925,"e",763769,151,"var d=this.patientinvoice.rxworkshee",765343,37,"e",763921,165,"f",763392,35,764122,39,"f",764162,230,"h",765695,33,765630,34,764460,37,"this.removeAttachementCarousel",764494,600,"e",765095,61,"e.setHtml(\"New Invoice\")}else{e",765187,77,"g=b",763865,55,765322,58,"var d=b.rxworkshee",765343,37,"var f=b.clworkshee",765343,37,"g",765484,36,"j,i,k",765422,98,"j,i,k",765525,67,"d",765484,36,"j,i,k){console.log(\"Loaded rxworksheets \");d.each(function(n,l,m){console.log(\"invoice rx.each() \"+l);this.addRxWorksheet(n)},this)}});var c=b.",690394,51,"();c",765484,36,"j,i,k){console.log(\"Loaded invoice attachments \");c.each(function(n,l,m){console.log(\"invoice attachments.each() \"+l);n.getFkuploads_iduploads(function(p,o){this.addAttachementToUI(p)},this)},this",765587,7256,"addAttachementToUI:function(a){var b=Ext.create(\"Ext.Panel\",{html:\"<img width='95%' src='data:image/png;base64,\"+a.get(\"data\")+\"'/>\"});this.getAttachementCarousel().add(b)},removeAttachementCarousel:function(){if(this.attachementCarousel){this.getInvoiceContainer().remove(this.attachementCarousel);this.attachementCarousel=null}},getAttachementCarousel:function(){if(!this.attachementCarousel){this.attachementCarousel=Ext.create(\"Ext.Carousel\",{defaults:{styleHtmlContent:true},items:[],iconCls:\"more\",title:\"Attachment(s)\"})}",770462,41,"this.attachementCarousel);return this.attachementCarousel",772841,72,"uploadImage:function(c){console.info(\"uploading image...\");var b=this;b.setMasked(tru",770060,32,"Upload\",{data:c,mimetype:\"image/png\"});a.save({success:function(d){console.info(\"upload image done: \"+a.get(\"id\"));var e=Ext.create(",722526,32,"{uploads_iduploads:a.get(\"id\")});this.patientinvoice.",690394,51,"().add(e);this.addAttachementToUI(a)},failure:function(d){console.info(\"upload image error!\");Ext.Msg.alert(\"Image Upload Failed\",\"Something went wrong! Please try again.",739421,34,"e,f,d){b.setMasked(false)}},this",772910,224,"65",773136,237,",flex:1",755673,37,"5 5 5",755455,43,"text:\"Cam\",cls:\"buttonSquare\",height:45,width:70,handler:function(a){var b=a.up(\"InvoicePanel\");Ext.device.Camera.capture({success:function(c){b.uploadImage(c)},quality:75,scope:b,source:\"camera\",destination:\"data\",encoding:\"png\"})}},{xtype:\"button\",text:\"Lib\",cls:\"buttonSquare\",height:45,width:70,handler:function(a){var b=a.up(\"InvoicePanel\");Ext.device.Camera.capture({success:function(c){b.uploadImage(c)},quality:75,scope:b,source:\"library\",destination:\"data\",encoding:\"png\"",774862,55,773376,898,"container\",flex:1",755673,37,"5 5",774304,108,"cls:\"buttonSquare\",height:45,width:70",774411,91,"cls:\"buttonSquare\",height:45,width:70",774912,2412,"Ext.create(\"WINK.model.RxWorksheet\");this.patientinvoice.rxworkshee",765343,36,".add(a);tabPanel.setActiveItem(this.addRxWorksheet())},addRxWorksheet:function(d){var c=\"New Rx\";if(d.get(\"id\")>0){c=\"R\"+d.get(\"id\")}var a=Ext.create(\"WINK.view.RxWorksheetPanel\",{title:c",777370,33,"add(a);a.loadRxWorksheet(d);return a",777419,919,"form.Panel,{loadRxWorksheet",800398,32,"config:{border:\"0 0 1 0\"",749245,51,734911,33,"{type:\"v",778394,35,778368,77,"150,title:\"Far PD",790283,35,"R\",labelWidth:\"20%\",name:\"r_farpd\"},{xtype:\"textfield\",label:\"L\",labelWidth:\"20%\",name:\"l_farpd\"}]},{xtype:\"fieldset\",width:150,title:\"Near PD",790283,35,"R\",labelWidth:\"20%\",name:\"r_closepd\"},{xtype:\"textfield\",label:\"L\",labelWidth:\"20%\",name:\"l_closepd\"}]},{xtype:\"fieldset\",width:150,title:\"Height",790283,35,"R\",labelWidth:\"20%\",name:\"r_height\"},{xtype:\"textfield\",label:\"L\",labelWidth:\"20%\",name:\"l_height\"}]",751120,50,778406,39,"500,title:\"Frame",778459,37,"Source\",name:\"framesrc\",options:[{text:\"Patient Own Frame\",value:0},{text:\"From Stock\",value:1},{text:\"To Order\",value:2}]}]",751120,50,778406,39,"500,items:[{xtype:\"textareafield\",label:\"Lab Instructions\",maxRows:4,name:\"labinstructions\"}]}]",785007,35,611074,80,778978,23519,",\"RxWorksheet\",\"ClWorksheet",802496,5570]